import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit

def poly4(x, a, b):
    return a * x**4 + b

def plot_csv_data(files, labels, colors):
    plt.figure(figsize=(10, 6))
    
    for file, label, color in zip(files, labels, colors):
        # Charger les données
        data = pd.read_csv(file)
        x = data.iloc[:, 0].values  # Première colonne
        y = data.iloc[:, 1].values  # Deuxième colonne
        
        # Tracer les données
        plt.scatter(x, y, label=f"Données - {label}", color=color, alpha=0.6)
        
        # Ajustement de la courbe
        params, _ = curve_fit(poly4, x, y)
        a, b = params
        x_fit = np.linspace(min(x), max(x), 100)
        y_fit = poly4(x_fit, a, b)
        plt.plot(x_fit, y_fit, color=color, linestyle='--', label=f"Fit - {label} (y={a:.3e}x⁴+{b:.3e})")
    
    # Mise en forme
    plt.xlabel("Axe X")
    plt.ylabel("Axe Y")
    plt.title("Courbes et Ajustements Polynomiaux")
    plt.legend()
    plt.grid()
    plt.show()

# Exemple d'utilisation
files = ["data1.csv", "data2.csv", "data3.csv"]
labels = ["Courbe 1", "Courbe 2", "Courbe 3"]
colors = ["blue", "red", "green"]
plot_csv_data(files, labels, colors)
